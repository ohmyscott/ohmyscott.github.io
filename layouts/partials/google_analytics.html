<!-- Google Analytics Template -->
{{- $ga := site.Config.Services.GoogleAnalytics -}}
{{- if $ga -}}
{{ template "_internal/google_analytics.html" . -}}
{{- end -}}

<!-- Alternative Google Analytics 4 -->
{{- if not $ga -}}
{{- $ga4id := site.Params.googleAnalyticsID -}}
{{- if $ga4id -}}
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id={{ $ga4id }}"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', '{{ $ga4id }}');
</script>
{{- end -}}
{{- end -}}

<!-- Fallback empty template if no analytics configured -->
{{- if not (or $ga $ga4id) -}}
<!-- Google Analytics not configured -->
{{- end -}}